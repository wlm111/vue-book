(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eb74e90"],{"09a2":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"popup"},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-bg",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.hide(e)},touchmove:function(t){t.preventDefault()}}})]),i("transition",{attrs:{name:"popup-slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-wrapper"},[t.title&&t.title.length>0?i("div",{staticClass:"popup-title"},[t._v(t._s(t.title))]):t._e(),t.thirdText&&t.thirdText.length>0?i("div",{staticClass:"popup-confirm-btn",on:{click:t.third}},[t._v(t._s(t.thirdText))]):t._e(),i("div",{staticClass:"popup-confirm-btn",class:{"is-remove":t.isRemoveText},on:{click:t.confirm}},[t._v(t._s(t.confirmText))]),i("div",{staticClass:"popup-cancel-btn",on:{click:t.hide}},[t._v(t._s(t.cancelText))])])])],1)},s=[],n={props:{title:String,confirmText:String,isRemoveText:Boolean,cancelText:String,thirdText:String},data:function(){return{popupVisible:!1,visible:!1}},methods:{third:function(){var t=this;this.hide(),setTimeout((function(){t.$emit("third")}),200)},confirm:function(){var t=this;this.hide(),setTimeout((function(){t.$emit("confirm")}),200)},hide:function(){var t=this;this.popupVisible=!1,setTimeout((function(){t.visible=!1}),200)},show:function(){this.visible=!0,this.popupVisible=!0}}},r=n,a=(i("1356"),i("4023")),c=Object(a["a"])(r,o,s,!1,null,"09913b8d",null);e["a"]=c.exports},1356:function(t,e,i){"use strict";var o=i("7c78"),s=i.n(o);s.a},1443:function(t,e,i){"use strict";var o=i("c0ee"),s=i.n(o);s.a},1775:function(t,e,i){},2129:function(t,e,i){"use strict";var o=i("a467"),s=i.n(o);s.a},"252b":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-category"},[i("shelf-title",{ref:"shelfTitle",staticClass:"shelf-title",attrs:{title:t.category.title,isEditMode:t.isEditMode,ifShowBack:t.ifShowBack,ifShowClear:t.ifShowClear,ifGroupEmpty:t.isEmpty,data:t.bookList,category:t.category},on:{"update:isEditMode":function(e){t.isEditMode=e},"update:is-edit-mode":function(e){t.isEditMode=e},onEditClick:t.onEditClick,deleteGroup:t.deleteGroup,editGroupName:t.editGroupName}}),t.isEmpty?t._e():i("scroll-view",{ref:"scroll",staticClass:"book-shelf-scroll-wrapper",attrs:{top:42,bottom:t.scrollBottom},on:{onScroll:t.onScroll}},[i("book-shelf",{ref:"bookShelf",staticClass:"book-shelf-list",attrs:{data:t.category.itemList,isEditMode:t.isEditMode},on:{onBookClick:t.onBookClick}})],1),t.isEditMode&&!t.isEmpty?i("book-shelf-footer",{staticClass:"book-shelf-footer",attrs:{data:t.category.itemList,bookList:t.bookList,isInGroup:!0,category:t.category},on:{setPrivate:t.setPrivate,setDownload:t.setDownload,removeBook:t.removeBook,groupEdit:t.groupEdit}}):t._e(),i("toast",{ref:"toast",attrs:{text:t.toastText}}),t.isEmpty?i("div",{staticClass:"shelf-empty-view"},[i("span",{staticClass:"shelf-empty-text"},[t._v(t._s(t.$t("shelf.groupNone")))])]):t._e()],1)},s=[],n=i("5b60"),r=n["a"],a=(i("86a4"),i("4023")),c=Object(a["a"])(r,o,s,!1,null,"78708088",null);e["default"]=c.exports},"28f6":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.visible?i("div",{staticClass:"shelf-group-dialog-bg"},[t.selectGroupDialogVisible?i("div",{staticClass:"shelf-group-dialog-wrapper"},[i("div",{staticClass:"dialog-list"},[i("div",{staticClass:"dialog-title-wrapper"},[i("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.$t("shelf.moveBook")))])]),i("div",{staticClass:"dialog-list-wrapper"},t._l(t.categoryList,(function(e,o){return 2===e.edit&&t.isInGroup||2!==e.edit||!e.edit?i("div",{key:o,staticClass:"dialog-list-item",class:{"is-add":!!e.edit&&1===e.edit},on:{click:function(i){return t.onGroupClick(e)}}},[i("div",{staticClass:"dialog-list-item-text"},[t._v(t._s(e.title))]),t.category&&e.id&&t.category.id===e.id?i("div",{staticClass:"dialog-list-icon-wrapper"},[i("span",{staticClass:"icon-check"})]):t._e()]):t._e()})),0)]),i("div",{staticClass:"dialog-btn-wrapper",on:{click:t.hide}},[i("div",{staticClass:"dialog-btn"},[t._v(t._s(t.$t("shelf.cancel")))])])]):t._e(),t.newGroupDialogVisible?i("div",{staticClass:"shelf-group-dialog-wrapper"},[i("div",{staticClass:"dialog-list"},[i("div",{staticClass:"dialog-title-wrapper"},[i("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.$t("shelf.newGroup")))])]),i("div",{staticClass:"dialog-input-title-wrapper"},[i("span",{staticClass:"dialog-input-title"},[t._v(t._s(t.$t("shelf.groupName")))])]),i("div",{staticClass:"dialog-input-wrapper"},[i("div",{staticClass:"dialog-input-inner-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newGroupName,expression:"newGroupName"}],ref:"dialogInput",staticClass:"dialog-input",attrs:{type:"text"},domProps:{value:t.newGroupName},on:{input:function(e){e.target.composing||(t.newGroupName=e.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.newGroupName.length>0,expression:"newGroupName.length > 0"}],staticClass:"dialog-input-clear-wrapper",on:{click:t.clear}},[i("span",{staticClass:"icon-close-circle-fill"})])])])]),i("div",{staticClass:"dialog-btn-wrapper"},[i("div",{staticClass:"dialog-btn",on:{click:t.hide}},[t._v(t._s(t.$t("shelf.cancel")))]),i("div",{staticClass:"dialog-btn",class:{"is-empty":0===t.newGroupName.length},on:{click:t.createNewGroup}},[t._v(t._s(t.$t("shelf.confirm")))])])]):t._e()]):t._e()])},s=[],n=i("c52d"),r={props:{visible:Boolean,data:Array,bookList:Array,isInGroup:Boolean,category:Object,isEditGroupName:{type:Boolean,default:!1}},computed:{defaultCategory:function(){return[{title:this.$t("shelf.newGroup"),edit:1},{title:this.$t("shelf.groupOut"),edit:2}]},categoryList:function(){var t=this.bookList?this.bookList.filter((function(t){return 2===t.type})):[];return[].concat(Object(n["a"])(this.defaultCategory),Object(n["a"])(t))}},data:function(){return{newGroupDialogVisible:!1,selectGroupDialogVisible:!0,newGroupName:""}},methods:{createNewGroup:function(){this.isEditGroupName?(this.$emit("editGroupName",this.category,this.newGroupName),this.hide()):(this.newGroupName.length>0&&this.$emit("group",2,{id:this.bookList[this.bookList.length-2].id+1,itemList:[],selected:!1,title:this.newGroupName,type:2}),this.hide())},clear:function(){this.newGroupName=""},onGroupClick:function(t){t.edit&&1===t.edit?this.showCreateGroupDialog():t.edit&&2===t.edit?(this.$emit("group",3,t),this.hide()):(this.$emit("group",1,t),this.hide())},showCreateGroupDialog:function(){var t=this;this.newGroupDialogVisible=!0,this.selectGroupDialogVisible=!1,this.newGroupName="",this.$nextTick((function(){t.$refs.dialogInput.focus()}))},showEditGroupDialog:function(){var t=this;this.newGroupDialogVisible=!0,this.selectGroupDialogVisible=!1,this.newGroupName=this.category.title,this.$nextTick((function(){t.$refs.dialogInput.focus()}))},show:function(){this.$emit("update:visible",!0)},hide:function(){this.$emit("update:visible",!1),this.newGroupDialogVisible=!1,this.selectGroupDialogVisible=!0}}},a=r,c=(i("eb88"),i("4023")),l=Object(c["a"])(a,o,s,!1,null,"27a02eda",null);e["a"]=l.exports},"3c52":function(t,e,i){},"5b60":function(t,e,i){"use strict";(function(t){i("b449");var o=i("ae9a"),s=(i("f548"),i("c52d")),n=(i("6d57"),i("ebe4")),r=i("9878"),a=i("4e1b"),c=i("cd05"),l=i("ad72"),h=i("e8ec"),u=i("101f"),d=i("b067"),f=i("6c9a");t.ePub=f["a"];var p="bookShelf";e["a"]={components:{ShelfTitle:n["a"],ScrollView:a["a"],BookShelf:r["a"],BookShelfFooter:c["a"],Toast:l["a"]},computed:{isEmpty:function(){return!(this.category&&this.category.itemList&&this.category.itemList.length>0)}},data:function(){return{index:null,bookList:[],category:{},isEditMode:!1,ifShowBack:!0,ifShowClear:!1,scrollBottom:0,toastText:""}},methods:{editGroupName:function(t,e){t.title=e,this.onEditClick(!1),this.saveBookShelfToLocalStorage()},deleteGroup:function(t){var e=this.getBooksFromCategory(t);this.removeCategory(t),this.clearAddFromBookList(),this.appendBookToList(e),this.appendAddToBookList(),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),this.$router.go(-1)},removeCategory:function(t){this.bookList=this.bookList.filter((function(e){return t.id!==e.id}))},getBooksFromCategory:function(t){return t.itemList},groupEdit:function(t,e){switch(t){case 1:this.moveToGroup(e);break;case 2:this.newGroup(e),this.moveToGroup(e);break;case 3:this.moveOutGroup();break}},getSelectedBooks:function(){var t=this.bookList.filter((function(t){return t.selected}));return this.bookList.filter((function(e){2===e.type&&e.itemList&&e.itemList.filter((function(e){e.selected&&t.push(e)}))})),t},clearSelectedBooks:function(){this.bookList=this.bookList.filter((function(t){return!t.selected})),this.bookList.forEach((function(t){2===t.type&&t.itemList&&(t.itemList=t.itemList.filter((function(t){return!t.selected})))}))},appendBookToList:function(t){var e=this,i=this.bookList[this.bookList.length-1].id+1;t.forEach((function(t){t.id=i++,e.bookList.push(t)}))},moveOutGroup:function(){this.clearAddFromBookList();var t=this.getSelectedBooks();this.clearSelectedBooks(),this.appendBookToList(t),this.appendAddToBookList(),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),this.showToast(this.$t("shelf.moveBookOutSuccess"))},newGroup:function(t){this.clearAddFromBookList(),this.bookList.push(t),this.appendAddToBookList()},moveToGroup:function(t){var e=this.getSelectedBooks();this.clearSelectedBooks(),t&&t.itemList&&(t.itemList=[].concat(Object(s["a"])(t.itemList),Object(s["a"])(e)),t.itemList.forEach((function(t,e){t.id=e+1}))),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),this.showToast(this.$t("shelf.moveBookInSuccess").replace("$1",t.title))},appendAddToBookList:function(){this.bookList.push({cover:"",title:"",type:3,id:this.bookList[this.bookList.length-1].id+1})},clearAddFromBookList:function(){this.bookList=this.bookList.filter((function(t){return 3!==t.type}))},removeBook:function(){this.bookList=this.bookList.filter((function(t){return t.itemList&&(t.itemList=t.itemList.filter((function(t){return!t.selected}))),!t.selected})),this.onEditClick(!1),this.saveBookShelfToLocalStorage()},onBookClick:function(t,e){this.$router.push({path:"/book-store/detail",query:{fileName:t.fileName,category:t.categoryText}})},showToast:function(t){this.toastText=t,this.$refs.toast.show()},removeDownloadBook:function(t){return new Promise((function(e,i){Object(u["c"])(t.fileName,(function(){console.log("[".concat(t.fileName,"]删除成功...")),e()}),i)}))},downloadBook:function(t){return new Promise((function(e,i){Object(u["b"])(t.fileName,(function(o,s){!o&&s instanceof Blob?(console.log("[".concat(t.fileName,"]读取成功..."),s,new f["a"](s)),e()):Object(d["b"])(t,(function(t){console.log("["+t.fileName+"]下载成功..."),e()}),i,i)}))}))},setDownload:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e?this.showToast(this.$t("shelf.setDownloadSuccess")):this.showToast(this.$t("shelf.removeDownloadSuccess")),i=regeneratorRuntime.mark((function t(i){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=s.bookList[i],!e||!o.selected){t.next=7;break}return console.log("item-正在处理第".concat(i+1,"本书")),t.next=5,s.downloadBook(o).then((function(){o.cache=e}));case 5:t.next=11;break;case 7:if(e||!o.selected){t.next=11;break}return console.log("item-正在处理第".concat(i+1,"本书")),t.next=11,s.removeDownloadBook(o).then((function(){o.cache=e}));case 11:if(!o.itemList){t.next=19;break}n=0;case 13:if(!(n<o.itemList.length)){t.next=19;break}return t.next=16,s.downloadItem(o.itemList[n],e);case 16:n++,t.next=13;break;case 19:case"end":return t.stop()}}),t)})),o=0;case 3:if(!(o<this.bookList.length)){t.next=8;break}return t.delegateYield(i(o),"t0",5);case 5:o++,t.next=3;break;case 8:this.onEditClick(!1),this.saveBookShelfToLocalStorage(),console.log("数据保存成功...");case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),downloadItem:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("subItem-正在处理".concat(e.fileName)),!i||!e.selected){t.next=6;break}return t.next=4,this.downloadBook(e).then((function(){e.cache=i}));case 4:t.next=9;break;case 6:if(i||!e.selected){t.next=9;break}return t.next=9,this.removeDownloadBook(e).then((function(){e.cache=i}));case 9:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),setPrivate:function(t){this.bookList.forEach((function(e){e.selected&&(e.private=t),e.itemList&&e.itemList.forEach((function(e){e.selected&&(e.private=t)}))})),this.onEditClick(!1),this.saveBookShelfToLocalStorage(),t?this.showToast(this.$t("shelf.setPrivateSuccess")):this.showToast(this.$t("shelf.closePrivateSuccess"))},onEditClick:function(t){var e=this;this.isEditMode=t,this.isEditMode||this.bookList.forEach((function(t){t.bookId?t.selected=!1:t.itemList&&t.itemList.forEach((function(t){t.selected=!1}))})),this.isEditMode?(this.scrollBottom=48,this.$nextTick((function(){e.$refs.scroll&&e.$refs.scroll.refresh()}))):(this.scrollBottom=0,this.$nextTick((function(){e.$refs.scroll&&e.$refs.scroll.refresh()})))},onScroll:function(t){t>0?this.$refs.shelfTitle.showShadow():this.$refs.shelfTitle.hideShadow()},getBookList:function(){this.bookList=this.getBookShelfFromLocalStorage()},getCategoryList:function(){this.index=this.$route.query.index,this.category=this.bookList[this.index],console.log(this.category)},saveBookShelfToLocalStorage:function(){Object(h["v"])(p,this.bookList)},getBookShelfFromLocalStorage:function(){return Object(h["f"])(p)}},mounted:function(){this.getBookList(),this.getCategoryList()}}}).call(this,i("9edd"))},"5bc8":function(t,e,i){"use strict";var o=i("606c"),s=i.n(o);s.a},"606c":function(t,e,i){},"76e1":function(t,e,i){"use strict";var o=i("3c52"),s=i.n(o);s.a},"7c78":function(t,e,i){},"7f1b":function(t,e,i){"use strict";var o=i("1775"),s=i.n(o);s.a},"86a4":function(t,e,i){"use strict";var o=i("a602"),s=i.n(o);s.a},9878:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf-wrapper"},[0===t.showType||1===t.showType?i("transition-group",{attrs:{name:"list",tag:"div",id:"book-shelf-list"}},t._l(t.bookData,(function(e,o){return i("div",{key:e.id,staticClass:"book-shelf-item",on:{click:function(i){return t.onBookClick(e,o)}}},[i("div",{ref:"bookImg",refInFor:!0,staticClass:"book-img-wrapper",class:{"add-book":3===e.type,"category-book":2===e.type}},[1===e.type?i("shelf-image",{attrs:{data:e,isEditMode:t.isEditMode}}):2===e.type?i("shelf-category",{attrs:{data:e,isEditMode:t.isEditMode}}):i("span",{staticClass:"icon-add icon"})],1),i("div",{staticClass:"book-title-wrapper"},[i("span",{staticClass:"book-title title-small"},[t._v(t._s(e.title))])])])})),0):t._e(),2===t.showType||3===t.showType?i("div",{staticClass:"book-shelf-label-list-wrapper"},t._l(t.purchaseData,(function(e,o){return i("div",{key:o,ref:"bookShelfList",refInFor:!0,staticClass:"book-shelf-list-wrapper"},[i("div",{staticClass:"book-shelf-label-item",class:{"is-fixed":e.isFixed}},[i("span",{staticClass:"book-shelf-label-text"},[t._v(t._s(e.label))])]),i("div",{staticClass:"book-shelf-item-wrapper"},t._l(e.bookList,(function(e,o){return i("div",{key:e.id,staticClass:"book-shelf-item",on:{click:function(i){return t.onBookClick(e,o)}}},[i("div",{ref:"bookImg",refInFor:!0,staticClass:"book-img-wrapper",class:{"add-book":3===e.type,"category-book":2===e.type}},[1===e.type?i("shelf-image",{attrs:{data:e,isEditMode:t.isEditMode}}):2===e.type?i("shelf-category",{attrs:{data:e,isEditMode:t.isEditMode}}):i("span",{staticClass:"icon-add icon"})],1),i("div",{staticClass:"book-title-wrapper"},[i("span",{staticClass:"book-title title-small"},[t._v(t._s(e.title))])])])})),0)])})),0):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.showType,expression:"showType === 0"}],staticClass:"book-shelf-statistics"},[t._v(t._s(t.$t("shelf.statistic").replace("$1",t.publicNumber).replace("$2",t.privateNumber))+"\n  ")])],1)},s=[],n=(i("163d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-category-wrapper"},[t.data.itemList.length>0?i("div",{staticClass:"shelf-category",class:{"is-edit":t.isEditMode}},t._l(t.data.itemList,(function(t,e){return i("div",{key:e,staticClass:"shelf-category-item"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"item.cover"}],staticClass:"shelf-category-img"})])})),0):i("div",{staticClass:"shelf-category-bg"},[i("span",{staticClass:"icon-book2"})])])}),r=[],a={props:{data:Object,isEditMode:Boolean}},c=a,l=(i("1443"),i("4023")),h=Object(l["a"])(c,n,r,!1,null,"20d63aec",null),u=h.exports,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-image"},[i("img",{staticClass:"book-img",attrs:{src:t.data.cover}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"icon-selected",class:{"is-selected":t.data.selected}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.private,expression:"data.private"}],staticClass:"private-wrapper"}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.private,expression:"data.private"}],staticClass:"private-icon-wrapper"},[i("span",{staticClass:"icon-private"})])])},f=[],p={props:{data:Object,isEditMode:Boolean}},v=p,m=(i("5bc8"),Object(l["a"])(v,d,f,!1,null,"19afbf0b",null)),g=m.exports,b=i("fa7d"),w=i("5de6"),k={props:{data:Array,isEditMode:Boolean,showType:{type:Number,default:0}},components:{ShelfCategory:u,ShelfImage:g},computed:{bookData:function(){return 0===this.showType?this.data:1===this.showType?Object(w["g"])(this.data):void 0},publicNumber:function(){if(this.data){var t=0;return this.data.filter((function(e){e.private||1!==e.type?2===e.type&&e.itemList.length>0&&(t+=e.itemList.filter((function(t){return!t.private&&1===t.type})).length):t++})),t}return 0},privateNumber:function(){if(this.data){var t=0;return this.data.filter((function(e){e.private&&1===e.type?t++:2===e.type&&e.itemList.length>0&&(t+=e.itemList.filter((function(t){return t.private&&1===t.type})).length)})),t}return 0},purchaseData:function(){var t={label:this.$t("shelf.bought"),bookList:this.flatData.filter((function(t){return t.cache})),isFixed:!1},e={label:this.$t("shelf.notPurchased"),bookList:this.flatData.filter((function(t){return!t.cache})),isFixed:!1};return[t,e]},bookShelfList:function(){return this.$refs.bookShelfList[0].getBoundingClientRect().height},bookShelfList2:function(){return this.$refs.bookShelfList[1].getBoundingClientRect().height}},methods:{fixTitle:function(t){2!==this.showType&&3!==this.showType||(t>Object(b["d"])(10)&&t<this.bookShelfList?!1===this.purchaseData[0].isFixed&&(this.purchaseData[0].isFixed=!0,this.purchaseData[1].isFixed=!1,this.$forceUpdate()):t>=this.bookShelfList-Object(b["d"])(42)?!1===this.purchaseData[1].isFixed&&(this.purchaseData[0].isFixed=!1,this.purchaseData[1].isFixed=!0,this.$forceUpdate()):(this.purchaseData[0].isFixed=!1,this.purchaseData[1].isFixed=!1,this.$forceUpdate()))},onBookClick:function(t,e){3===t.type?this.$router.push("/book-store/home"):1===t.type?this.isEditMode?t.selected=!t.selected:this.$emit("onBookClick",t,e):2===t.type&&(this.isEditMode||this.$router.push({path:"/book-store/category",query:{index:e}}))}}},y=k,x=(i("76e1"),Object(l["a"])(y,o,s,!1,null,"1a103957",null));e["a"]=x.exports},a467:function(t,e,i){},a602:function(t,e,i){},ae9a:function(t,e,i){"use strict";function o(t,e,i,o,s,n,r){try{var a=t[n](r),c=a.value}catch(l){return void i(l)}a.done?e(c):Promise.resolve(c).then(o,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,n){var r=t.apply(e,i);function a(t){o(r,s,n,a,c,"next",t)}function c(t){o(r,s,n,a,c,"throw",t)}a(void 0)}))}}i.d(e,"a",(function(){return s}))},b449:function(t,e,i){var o=function(t){"use strict";var e,i=Object.prototype,o=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",r=s.asyncIterator||"@@asyncIterator",a=s.toStringTag||"@@toStringTag";function c(t,e,i,o){var s=e&&e.prototype instanceof v?e:v,n=Object.create(s.prototype),r=new _(o||[]);return n._invoke=L(t,i,r),n}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(o){return{type:"throw",arg:o}}}t.wrap=c;var h="suspendedStart",u="suspendedYield",d="executing",f="completed",p={};function v(){}function m(){}function g(){}var b={};b[n]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(T([])));k&&k!==i&&o.call(k,n)&&(b=k);var y=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function C(t,e){function i(s,n,r,a){var c=l(t[s],t,n);if("throw"!==c.type){var h=c.arg,u=h.value;return u&&"object"===typeof u&&o.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,r,a)}),(function(t){i("throw",t,r,a)})):e.resolve(u).then((function(t){h.value=t,r(h)}),(function(t){return i("throw",t,r,a)}))}a(c.arg)}var s;function n(t,o){function n(){return new e((function(e,s){i(t,o,e,s)}))}return s=s?s.then(n,n):n()}this._invoke=n}function L(t,e,i){var o=h;return function(s,n){if(o===d)throw new Error("Generator is already running");if(o===f){if("throw"===s)throw n;return G()}i.method=s,i.arg=n;while(1){var r=i.delegate;if(r){var a=S(r,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===h)throw o=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=d;var c=l(t,e,i);if("normal"===c.type){if(o=i.done?f:u,c.arg===p)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=f,i.method="throw",i.arg=c.arg)}}}function S(t,i){var o=t.iterator[i.method];if(o===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,S(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=l(o,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var n=s.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function T(t){if(t){var i=t[n];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var s=-1,r=function i(){while(++s<t.length)if(o.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}return{next:G}}function G(){return{value:e,done:!0}}return m.prototype=y.constructor=g,g.constructor=m,g[a]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},x(C.prototype),C.prototype[r]=function(){return this},t.AsyncIterator=C,t.async=function(e,i,o,s,n){void 0===n&&(n=Promise);var r=new C(c(e,i,o,s),n);return t.isGeneratorFunction(i)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},x(y),y[a]="Generator",y[n]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var o=e.pop();if(o in t)return i.value=o,i.done=!1,i}return i.done=!0,i}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(o,s){return a.type="throw",a.arg=t,i.next=o,s&&(i.method="next",i.arg=e),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],a=r.completion;if("root"===r.tryLoc)return s("end");if(r.tryLoc<=this.prev){var c=o.call(r,"catchLoc"),l=o.call(r,"finallyLoc");if(c&&l){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return s(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&o.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var r=n?n.completion:{};return r.type=t,r.arg=e,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;E(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:T(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=o}catch(s){Function("r","regeneratorRuntime = r")(o)}},c0ee:function(t,e,i){},c220:function(t,e,i){},c52d:function(t,e,i){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function s(t){if(Array.isArray(t))return o(t)}function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t,e){if(t){if("string"===typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return s(t)||n(t)||r(t)||a()}i.d(e,"a",(function(){return c}))},cd05:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf-footer"},[t._l(t.tabs,(function(e,o){return i("div",{key:o,staticClass:"book-shelf-tab-wrapper",on:{click:function(i){return t.onTabClick(e)}}},[i("div",{staticClass:"book-shelf-tab"},[1!==e.index||t.isPrivate?t._e():i("div",{staticClass:"icon-private tab-icon",class:{"is-selected":t.isSelected}}),1===e.index&&t.isPrivate?i("div",{staticClass:"icon-private-see tab-icon",class:{"is-selected":t.isSelected}}):t._e(),2!==e.index||t.isDownload?t._e():i("div",{staticClass:"icon-download tab-icon",class:{"is-selected":t.isSelected}}),2===e.index&&t.isDownload?i("div",{staticClass:"icon-download-remove tab-icon",class:{"is-selected":t.isSelected}}):t._e(),3===e.index?i("div",{staticClass:"icon-move tab-icon",class:{"is-selected":t.isSelected}}):t._e(),4===e.index?i("div",{staticClass:"icon-shelf tab-icon",class:{"is-selected":t.isSelected}}):t._e(),i("div",{staticClass:"tab-text",class:{"remove-text":4===e.index,"is-selected":t.isSelected}},[t._v(t._s(t.label(e))+"\n      ")])])])})),i("popup",{ref:"popup",attrs:{title:t.popTitle,confirmText:t.confirmText,isRemoveText:t.isRemoveText,cancelText:t.$t("shelf.cancel")},on:{confirm:t.onConfirm}}),i("shelf-group-dialog",{attrs:{visible:t.ifGroupDialogShow,data:t.data,bookList:t.bookList,category:t.category,isInGroup:t.isInGroup},on:{"update:visible":function(e){t.ifGroupDialogShow=e},group:t.groupEdit}})],2)},s=[],n=(i("f548"),i("6d57"),i("09a2")),r=i("28f6"),a={props:{data:Array,isInGroup:Boolean,bookList:Array,category:Object},components:{ShelfGroupDialog:r["a"],Popup:n["a"]},computed:{selectedBooks:function(){var t=[];return this.data.forEach((function(e){e.selected&&t.push(e)})),t},isSelected:function(){return!!this.data&&this.data.some((function(t){return t.selected}))},isPrivate:function(){return!!this.isSelected&&this.data.every((function(t){return!t.selected||t.private}))},isDownload:function(){return!!this.isSelected&&this.data.every((function(t){return!t.selected||t.cache}))},tabs:function(){return[{label:this.$t("shelf.private"),label2:this.$t("shelf.noPrivate"),index:1},{label:this.$t("shelf.download"),label2:this.$t("shelf.delete"),index:2},{label:this.$t("shelf.move"),index:3},{label:this.$t("shelf.remove"),index:4}]}},data:function(){return{popTitle:"",confirmText:"",isRemoveText:!1,ifShowPopup:!1,ifGroupDialogShow:!1,onConfirm:function(){}}},methods:{label:function(t){switch(t.index){case 1:return this.isPrivate?t.label2:t.label;case 2:return this.isDownload?t.label2:t.label;default:return t.label}},removeBook:function(){this.$emit("removeBook")},onSetDownload:function(){this.$emit("setDownload",!0)},onRemoveDownload:function(){this.$emit("setDownload",!1)},onSetPrivate:function(){this.$emit("setPrivate",!0)},onCancelPrivate:function(){this.$emit("setPrivate",!1)},onTabClick:function(t){1===t.index?this.showPrivate():2===t.index?this.showDownload():3===t.index?this.showGroupDialog():4===t.index&&this.showRemove()},showGroupDialog:function(){this.isSelected&&(this.ifGroupDialogShow=!0)},showRemove:function(){var t;this.isSelected&&(t=1===this.selectedBooks.length?this.$t("shelf.removeBookTitle").replace("$1","《"+this.selectedBooks[0].title+"》"):this.$t("shelf.removeBookTitle").replace("$1",this.$t("shelf.selectedBooks")),this.showPopup(t,this.$t("shelf.removeBook"),this.removeBook,!0))},showDownload:function(){this.isSelected&&(this.isDownload?this.showPopup(this.$t("shelf.removeDownloadTitle"),this.$t("shelf.delete"),this.onRemoveDownload,!0):this.showPopup(this.$t("shelf.setDownloadTitle"),this.$t("shelf.open"),this.onSetDownload))},showPrivate:function(){this.isSelected&&(this.isPrivate?this.showPopup(this.$t("shelf.closePrivateTitle"),this.$t("shelf.close"),this.onCancelPrivate):this.showPopup(this.$t("shelf.setPrivateTitle"),this.$t("shelf.open"),this.onSetPrivate))},showPopup:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.popTitle=t,this.confirmText=e,this.onConfirm=i,this.isRemoveText=o,this.$refs.popup.show()},groupEdit:function(t,e){this.$emit("groupEdit",t,e)}}},c=a,l=(i("7f1b"),i("4023")),h=Object(l["a"])(c,o,s,!1,null,"b32439de",null);e["a"]=h.exports},eb88:function(t,e,i){"use strict";var o=i("c220"),s=i.n(o);s.a},ebe4:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"shelf-title-wrapper",class:{"hide-shadow":t.ifHideShadow}},[i("div",{staticClass:"title"},[i("span",{staticClass:"title-text"},[t._v(t._s(t.title))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"sub-title-text"},[t._v(t._s(t.selectedText))])]),t.ifGroupEmpty||t.isDataEmpty?t._e():i("div",{staticClass:"btn-text-wrapper",on:{click:t.onEditClick}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.isEditMode?t.$t("shelf.cancel"):t.$t("shelf.edit")))])]),t.ifGroupEmpty&&!t.isDataEmpty?i("div",{staticClass:"btn-text-wrapper",on:{click:t.changeGroup}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.editGroup")))])]):t._e(),t.isDataEmpty?i("div",{staticClass:"btn-text-wrapper",on:{click:t.changeLanguage}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.changeLanguage")))])]):t._e(),t.ifShowClear&&!t.isDataEmpty?i("div",{staticClass:"btn-clear-wrapper",on:{click:t.clearCache}},[i("span",{staticClass:"btn-clear"},[t._v(t._s(t.$t("shelf.clearCache")))])]):t._e(),t.ifShowBack&&!t.isEditMode?i("div",{staticClass:"btn-back-wrapper",on:{click:t.back}},[i("span",{staticClass:"icon-back"})]):t._e(),t.ifShowBack&&t.isEditMode?i("div",{staticClass:"btn-back-wrapper",on:{click:t.changeGroup}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.editGroup")))])]):t._e(),i("popup",{ref:"popup",attrs:{title:t.popupTitle,thirdText:t.thirdText,confirmText:t.confirmText,isRemoveText:!0,cancelText:t.$t("shelf.cancel")},on:{confirm:t.onPopupDelete,third:t.onPopupChange}}),i("shelf-group-dialog",{ref:"groupDialog",attrs:{visible:t.ifGroupDialogShow,isEditGroupName:!0,category:t.category},on:{"update:visible":function(e){t.ifGroupDialogShow=e},editGroupName:t.editGroupName}})],1)])},s=[],n=(i("f548"),i("09a2")),r=i("28f6"),a=i("5de6"),c={components:{ShelfGroupDialog:r["a"],Popup:n["a"]},props:{isEditMode:Boolean,ifShowBack:Boolean,ifShowClear:Boolean,ifGroupEmpty:Boolean,data:Array,title:String,category:Object},computed:{isDataEmpty:function(){return!this.data||0===this.data.filter((function(t){return 3!==t.type})).length},selectedText:function(){return 0===this.selectedNumber?this.$t("shelf.selectBook"):1===this.selectedNumber?this.$t("shelf.haveSelectedBook").replace("$1",this.selectedNumber):this.$t("shelf.haveSelectedBooks").replace("$1",this.selectedNumber)},selectedNumber:function(){return this.category&&this.category.itemList?this.category.itemList.filter((function(t){return t.selected})).length:this.data?this.data.filter((function(t){return t.selected})).length:0},thirdText:function(){return this.isDeleteGroup?"":this.$t("shelf.editGroupName")},popupTitle:function(){return this.isDeleteGroup?this.$t("shelf.deleteGroupTitle"):""},confirmText:function(){return this.isDeleteGroup?this.$t("shelf.confirm"):this.$t("shelf.deleteGroup")}},data:function(){return{ifHideShadow:!0,ifGroupDialogShow:!1,isDeleteGroup:!1}},methods:{changeLanguage:function(){Object(a["n"])(this)},editGroupName:function(t,e){this.$emit("editGroupName",t,e)},showPopup:function(){this.$refs.popup.show()},onPopupDelete:function(){var t=this;this.isDeleteGroup?(this.$emit("deleteGroup",this.category),this.isDeleteGroup=!1):(this.$refs.popup.hide(),setTimeout((function(){t.isDeleteGroup=!0,t.$refs.popup.show()}),200))},onPopupChange:function(){this.ifGroupDialogShow=!0,this.$refs.groupDialog.showEditGroupDialog()},changeGroup:function(){this.showPopup()},back:function(){this.$router.go(-1)},clearCache:function(){this.$emit("clearCache")},showShadow:function(){this.ifHideShadow=!1},hideShadow:function(){this.ifHideShadow=!0},onEditClick:function(){this.isEditMode?this.$emit("onEditClick",!1):this.$emit("onEditClick",!0)}}},l=c,h=(i("2129"),i("4023")),u=Object(h["a"])(l,o,s,!1,null,"3dbaa232",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-6eb74e90.624cede8.js.map